{"version":3,"sources":["components/Blog.js","components/BlogForm.js","components/LoginForm.js","components/Logout.js","services/blogs.js","services/login.js","components/Notification.js","components/Togglable.js","App.js","index.js"],"names":["Blog","blog","handleLike","handleDelete","user","useState","visible","setVisible","toggle","enlarged","display","paddingTop","paddingLeft","border","borderWidth","marginBottom","shrunken","className","onClick","style","title","author","url","id","likes","likedBlog","length","username","window","confirm","BlogForm","createBlog","setTitle","setAuthor","setUrl","onSubmit","event","preventDefault","type","value","name","onChange","target","LoginForm","handleSubmit","password","handleUsernameChange","handlePasswordChange","Logout","handleLogout","token","getAll","axios","get","then","response","data","create","newBlog","a","config","headers","Authorization","post","update","put","setToken","newToken","remove","delete","login","credentials","Notification","message","Togglable","buttonLabel","children","hideWhenVisible","showWhenVisible","toggleVisibility","App","blogs","setBlogs","setUsername","setPassword","setUser","notification","setNotification","useEffect","blogService","loggedUserJSON","localStorage","getItem","JSON","parse","handleLogin","loginService","setItem","stringify","notify","handleBlogSubmit","obj","concat","handleLiking","updatedBlog","map","b","handleDeleting","filter","clearTimeout","setTimeout","removeItem","sort","key","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d74b5712.chunk.js","sourcesContent":["/* eslint-disable linebreak-style */\r\nimport React, { useState } from 'react'\r\n\r\nconst Blog = ({ blog, handleLike, handleDelete, user }) => {\r\n  const [visible, setVisible] = useState(false)\r\n  const toggle = () => setVisible(!visible)\r\n  const enlarged = { display: visible ? '' : 'none',  paddingTop: 10,\r\n    paddingLeft: 2,\r\n    border: 'solid',\r\n    borderWidth: 1,\r\n    marginBottom: 5 }\r\n  const shrunken = { display: visible ? 'none' : '' }\r\n  const likePushed = () => {\r\n    const likedBlog = { ...blog, likes: blog.likes + 1 }\r\n    handleLike(likedBlog)\r\n  }\r\n  const deletePushed = () => {\r\n    if(window.confirm(`You are about to delete ${blog.title} by ${blog.author}`)){\r\n      handleDelete(blog)\r\n    }\r\n  }\r\n\r\n  const canDelete = () => {\r\n    if(user && blog.user){\r\n      return blog.user.length > 0 ? (blog.user[0].username) === user.username : true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className='blog'>\r\n      <div className='minimized' onClick={toggle} style={shrunken}>{`${blog.title}  ${blog.author}`}</div>\r\n      <div className='maximized' style={enlarged}>\r\n        <div>{blog.title}<button onClick={toggle}>hide</button></div>\r\n        <div>{blog.url}</div>\r\n        <div id='blogLikes'>likes {blog.likes} <button id='blogLikeButton' onClick={likePushed}>like</button></div>\r\n        <div>{blog.author}</div>\r\n        {canDelete() && <button id='blogDeleteButton' onClick={deletePushed}>remove</button>}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Blog\r\n","import React, { useState } from 'react'\n\nconst BlogForm = ({\n  createBlog\n}) => {\n\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    createBlog({\n      title, author, url\n    })\n    setTitle('')\n    setAuthor('')\n    setUrl('')\n  }\n\n  return (\n    <form className='formDiv' onSubmit={handleSubmit}>\n      <div>\n        title\n        <input\n          id='title'\n          type='text'\n          value={title}\n          name=\"title\"\n          onChange={({ target }) => setTitle(target.value)}\n        />\n      </div>\n      <div>\n        author\n        <input\n          id='author'\n          type='text'\n          value={author}\n          name=\"author\"\n          onChange={({ target }) => setAuthor(target.value)}\n        />\n      </div>\n      <div>\n        url\n        <input\n          id='url'\n          type='text'\n          value={url}\n          name=\"url\"\n          onChange={({ target }) => setUrl(target.value)}\n        />\n      </div>\n      <button id='blogSubmitButton' type=\"submit\">submit</button>\n    </form>\n  )\n}\n\nexport default BlogForm","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst LoginForm = ({\n  handleSubmit,\n  username,\n  password,\n  handleUsernameChange,\n  handlePasswordChange,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n                username\n        <input\n          id='username'\n          type='text'\n          value={username}\n          name=\"Username\"\n          onChange={handleUsernameChange}\n        />\n      </div>\n      <div>\n                password\n        <input\n          id='password'\n          type='text'\n          value={password}\n          name=\"Password\"\n          onChange={handlePasswordChange}\n        />\n      </div>\n      <button id='login-button' type=\"submit\">login</button>\n    </form>\n  )\n}\n\nLoginForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleUsernameChange: PropTypes.func.isRequired,\n  handlePasswordChange: PropTypes.func.isRequired,\n  username: PropTypes.string.isRequired,\n  password: PropTypes.string.isRequired\n}\n\nexport default LoginForm","import React from 'react'\n\nconst Logout = ({ name, handleLogout }) => {\n  return (\n    <p>{name} logged in {<button onClick={handleLogout}>logout</button>}</p>\n  )\n}\n\nexport default Logout","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async newBlog => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const response = await axios.post(baseUrl, newBlog, config)\n  return response.data\n}\n\nconst update = (id, newBlog) => {\n  const request = axios.put(`${baseUrl}/${id}`, newBlog)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const config = {\n    headers: { Authorization: token }\n  }\n  const request = axios.delete(`${baseUrl}/${id}`, config)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, setToken, remove }","import axios from 'axios'\n\nconst baseUrl = '/api/login'\n\nconst login = async (credentials) => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }\n","import React from 'react'\n\nconst Notification = ({ message }) =>\n  <div className='error'>{message}</div>\n\nexport default Notification","///copied togglable from https://fullstackopen.com/osa5/props_children_ja_proptypet\nimport React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Togglable = ({ buttonLabel, children }) => {\n  const [visible, setVisible] = useState(false)\n\n  const hideWhenVisible = { display: visible ? 'none' : '' }\n  const showWhenVisible = { display: visible ? '' : 'none' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  return (\n    <div>\n      <div style={hideWhenVisible}>\n        <button onClick={toggleVisibility}>{buttonLabel}</button>\n      </div>\n      <div style={showWhenVisible}>\n        {children}\n        <button onClick={toggleVisibility}>cancel</button>\n      </div>\n    </div>\n  )\n}\n\nTogglable.propTypes = {\n  buttonLabel: PropTypes.string.isRequired\n}\n\nexport default Togglable","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport BlogForm from './components/BlogForm'\nimport LoginForm from './components/LoginForm'\nimport Logout from './components/Logout'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport Notification from './components/Notification'\nimport Togglable from './components/Togglable'\n\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n  const [notification, setNotification] = useState(null)\n\n  useEffect(() => {\n    blogService.getAll().then((blogs) => setBlogs(blogs))\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedUser')\n    if(loggedUserJSON){\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  },[])\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n      window.localStorage.setItem('loggedUser', JSON.stringify(user))\n      blogService.setToken(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      notify('wrong username or password')\n    }\n  }\n\n  const handleBlogSubmit = async (obj) => {\n    try{\n      const blog = await blogService.create(obj)\n      setBlogs(blogs.concat(blog))\n      notify(`a new blog ${blog.title} by ${blog.author} added`)\n    } catch(error){\n      notify('there was a problem, could not add blog')\n    }\n  }\n\n  const handleLiking = async (obj) => {\n    try{\n      const updatedBlog = await blogService.update(obj.id, obj)\n      setBlogs(blogs.map(b => b.id === updatedBlog.id ? updatedBlog : b))\n      notify(`${updatedBlog.title} + 1 like!`)\n    } catch(error){\n      notify(`there was error liking blog ${obj.title}`)\n    }\n  }\n\n  const handleDeleting = async (obj) => {\n    try{\n      await blogService.remove(obj.id)\n      setBlogs(blogs.filter(b => b.id !== obj.id))\n      notify(`${obj.title} deleted!`)\n    } catch(error){\n      notify(`an error occured when deleting ${obj.title}`)\n    }\n  }\n\n  const logoutPushed = () => {\n    setUser(null)\n    window.localStorage.removeItem('loggedUser')\n  }\n\n  const notify = (message) => {\n    clearTimeout()\n    setNotification(message)\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)\n  }\n\n  return (\n    <div>\n      <h2>blogs</h2>\n      {notification && <Notification message={notification}/>}\n\n      {!user\n        ? (\n\n          <LoginForm\n            handleSubmit={handleLogin}\n            username={username}\n            password={password}\n            handleUsernameChange={({ target }) => setUsername(target.value)}\n            handlePasswordChange={({ target }) => setPassword(target.value)}\n          />\n        )\n        : (\n          <>\n            <Logout name={user.name} handleLogout={logoutPushed}/>\n            <Togglable buttonLabel='new blog'>\n              <BlogForm\n                createBlog={handleBlogSubmit}\n              />\n            </Togglable>\n            <div id=\"blogs\">\n              {blogs.sort((a, b) => b.likes - a.likes).map((blog) =>\n                <Blog\n                  key={blog.id}\n                  blog={blog}\n                  handleLike={handleLiking}\n                  handleDelete={handleDeleting}\n                  user={user}\n                />\n              )}\n            </div>\n          </>\n        )}\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}