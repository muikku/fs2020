(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{117:function(e,t,n){e.exports=n(146)},146:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),o=n.n(c),l=n(12),i=n.n(l),u=n(11),s=n(17),m=n(199),p=n(53),d=n(200),f=n(102),E=n(201),b=n(202),g=n(203),v=n(204),h=n(196),O=function(){for(var e=[],t=0;t<6;t++)e.push(o.a.createElement("div",{key:t},o.a.createElement(h.a,{animation:"wave",height:80})));return o.a.createElement(o.a.Fragment,null,e)},y=function(){var e=Object(u.c)((function(e){return e.blogs}));return o.a.createElement(m.a,{container:!0,direction:"column",justify:"space-between",alignItems:"stretch",spacing:3},o.a.createElement(m.a,{container:!0,alignItems:"center",justify:"center",spacing:3},o.a.createElement(m.a,{item:!0},o.a.createElement(p.a,{variant:"h2"},"Blogs"))),o.a.createElement(m.a,{item:!0},e.length>=1?o.a.createElement(d.a,{component:f.a},o.a.createElement(E.a,null,o.a.createElement(b.a,null,e.sort((function(e,t){return t.likes-e.likes})).map((function(e){return o.a.createElement(g.a,{key:e.id},o.a.createElement(v.a,null,o.a.createElement(s.b,{to:"/blogs/".concat(e.id)},e.title," ")),o.a.createElement(v.a,null,e.author))}))))):o.a.createElement(O,null)))},k=n(37),w=function(){var e=Object(k.g)().id,t=Object(u.c)((function(e){return e.users})).find((function(t){return t.id===e}));return t?o.a.createElement(m.a,{alignItems:"stretch",justify:"center",container:!0,direction:"column",spacing:3},o.a.createElement(m.a,{alignItems:"center",container:!0,justify:"center",direction:"column"},o.a.createElement(m.a,{item:!0},o.a.createElement(p.a,{variant:"h2"},t.name)),o.a.createElement(m.a,{item:!0},t.blogs.length<1?o.a.createElement(p.a,{variant:"h4"},"no blogs yet :/"):o.a.createElement(p.a,{variant:"h4"},"added blogs"))),o.a.createElement(m.a,{item:!0},o.a.createElement(d.a,{component:f.a},o.a.createElement(E.a,null,o.a.createElement(b.a,null,t.blogs.map((function(e){return o.a.createElement(g.a,{key:e.id},o.a.createElement(v.a,null,o.a.createElement(s.b,{to:"/blogs/".concat(e.id)},e.title," ")),o.a.createElement(v.a,null,o.a.createElement(p.a,null,e.likes," likes")))}))))))):null},j=n(36),x=n(9),S=n.n(x),C=n(14),T=n(28),I=n.n(T),L="/api/blogs",N=null,R={getAll:function(){return I.a.get(L).then((function(e){return e.data}))},create:function(){var e=Object(C.a)(S.a.mark((function e(t){var n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:N}},e.next=3,I.a.post(L,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return I.a.put("".concat(L,"/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){N="bearer ".concat(e)},remove:function(e){var t={headers:{Authorization:N}};return I.a.delete("".concat(L,"/").concat(e),t).then((function(e){return e.data}))},resetToken:function(){return N=null},getComments:function(){var e=Object(C.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("".concat(L,"/all/comments"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),postComment:function(){var e=Object(C.a)(S.a.mark((function e(t,n){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("".concat(L,"/").concat(n,"/comments"),t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},A=function(e,t,n,r){e({type:"ADD_MESSAGE",data:{message:t,severity:r||"success"}}),clearTimeout(a),a=setTimeout((function(){e({type:"CLEAR_MESSAGE"})}),1e3*(n||5))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOGS":return t.data;case"CREATE_BLOG":return e.concat(t.data);case"LIKE_BLOG":return e.map((function(e){return e.id===t.data.id?t.data:e}));case"DELETE_BLOG":return e.filter((function(e){return e.id!==t.data}));default:return e}},B=n(6),G=n(15),D=n(205),M=function(e){var t=Object(c.useState)(""),n=Object(G.a)(t,2),a=n[0],r=n[1];return{type:e,value:a,onChange:function(e){r(e.target.value)},onSubmit:function(){return r("")}}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_COMMENTS":return t.comments;case"POST_COMMENT":return e.concat(t.comment);default:return e}},P=n(228),q=function(e){var t=e.blog,n=M("text"),a=Object(u.c)((function(e){return e.comments.filter((function(e){return e.blogId===t.id}))})),r=Object(u.b)();return o.a.createElement("div",null,o.a.createElement(p.a,null,a.length," comments"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{var a={comment:n.value};r((c=a,o=t.id,function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.postComment(c,o);case 3:n=e.sent,t({type:"POST_COMMENT",comment:n}),A(t,"comment added"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response.data.error?A(t,e.t0.response.data.error,15,"error"):A(t,"Server is not responding",15,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())),n.onSubmit()}catch(l){console.log(l)}var c,o}},o.a.createElement(P.a,{label:"add comment",inputProps:n})),a.map((function(e){return o.a.createElement(p.a,{key:e.id},e.comment)})))},z=n(213),J=n(212),F=n(216),K=n(217),V=n(214),W=n(215),Y=n(207),H=n(211),Q=n(209),X=n(210),Z=n(208),$=function(e){var t=e.buttonText,n=e.dialogTitle,a=e.dialogText,r=e.confirmButtonName,c=e.cancelButtonName,l=e.action,i=o.a.useState(!1),u=Object(G.a)(i,2),s=u[0],m=u[1],d=function(){m(!1)};return o.a.createElement("div",null,o.a.createElement(p.a,{onClick:function(){m(!0)}},t),o.a.createElement(Y.a,{open:s,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Z.a,{id:"alert-dialog-title"},n),o.a.createElement(Q.a,null,o.a.createElement(X.a,{id:"alert-dialog-description"},a)),o.a.createElement(H.a,null,o.a.createElement(J.a,{variant:"contained",onClick:function(){m(!1),l()},color:"secondary"},r),o.a.createElement(J.a,{variant:"contained",onClick:d,color:"primary",autoFocus:!0},c))))},ee=function(){var e=Object(k.g)().id,t=Object(u.b)(),n=Object(k.f)(),a=Object(u.c)((function(e){return e.blogs})),r=Object(u.c)((function(e){return e.login})),c=a.find((function(t){return t.id===e}));if(!c)return null;var l=c.user[0];return o.a.createElement(z.a,null,o.a.createElement(m.a,{container:!0,direction:"column",justify:"space-between",spacing:3},o.a.createElement(m.a,{item:!0},o.a.createElement(p.a,{variant:"h2"},c.title," ",c.author),o.a.createElement("a",{href:c.url},o.a.createElement(p.a,null,c.url)),o.a.createElement(p.a,null,"added by ",o.a.createElement(s.b,{to:"/users/".concat(l.id)},l.name," "))),o.a.createElement(m.a,{item:!0},o.a.createElement(m.a,{container:!0,direction:"row",justify:"space-between"},o.a.createElement(J.a,{variant:"contained",startIcon:o.a.createElement(V.a,null),color:"inherit",id:"blogLikeButton",onClick:function(){return t(function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var a,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(j.a)({},e,{likes:e.likes+1}),t.next=4,R.update(e.id,a);case 4:r=t.sent,n({type:"LIKE_BLOG",data:a}),A(n,"liked ".concat(r.title,"!")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),t.t0.response.data.error?A(n,t.t0.response.data.error,15,"error"):A(n,"Server is not responding",15,"error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(c))}},c.likes," likes"),!r||!c.user||c.user.length>0&&r.username!==l.username?o.a.createElement(F.a,{title:"only owner can delete"},o.a.createElement("span",null,o.a.createElement(J.a,{variant:"outlined",startIcon:o.a.createElement(W.a,null),disabled:!0},"Remove"))):o.a.createElement(J.a,{variant:"outlined",color:"secondary",startIcon:o.a.createElement(W.a,null)},o.a.createElement($,{buttonText:"Remove",dialogTitle:"Delete blog?",dialogText:"Just confirming that you really want to delete ".concat(c.title," by ").concat(c.author,".\nThis action cannot be reverted."),confirmButtonName:"Remove",cancelButtonName:"Cancel",action:function(){t(function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.remove(e.id);case 3:n({type:"DELETE_BLOG",data:e.id}),A(n,"".concat(e.title," deleted!")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response.data.error?A(n,t.t0.response.data.error,15,"error"):A(n,"Server is not responding",15,"error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(c)),n.push("/blogs")}})))),o.a.createElement(m.a,{item:!0},o.a.createElement(K.a,{spacing:3})),o.a.createElement(m.a,{item:!0},o.a.createElement(q,{blog:c}))))},te=n(21),ne=n(218),ae=n(219),re=n(96),ce=n.n(re),oe=Object(D.a)((function(e){var t;return{fab:(t={},Object(B.a)(t,e.breakpoints.down("sm"),{position:"absolute",bottom:e.spacing(3),right:e.spacing(3)}),Object(B.a)(t,e.breakpoints.up("md"),{position:"absolute",bottom:e.spacing(10),left:"48%"}),t)}})),le=function(e){var t=e.on,n=e.handleClick,a=oe(),r=Object(te.a)(),c={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},l={color:"primary",className:a.fab,icon:o.a.createElement(ce.a,null),label:"Add"};return o.a.createElement(ne.a,{key:l.color,in:!!t,timeout:c,style:{transitionDelay:"".concat(c.exit,"ms")},unmountOnExit:!0},o.a.createElement(ae.a,{"aria-label":l.label,className:l.className,color:l.color,onClick:function(){return n()}},l.icon))},ie=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login})),n=Object(k.f)(),a=M("text"),r=M("text"),l=M("url"),i=Object(c.useState)(!1),s=Object(G.a)(i,2),m=s[0],p=s[1];return o.a.createElement("div",null,o.a.createElement(le,{on:t,handleClick:function(){return p(!0)}}),o.a.createElement(Y.a,{open:m,onClose:function(){return p(!1)},"aria-labelledby":"form-dialog-title"},o.a.createElement(Z.a,{id:"form-dialog-title"},"Create blog"),o.a.createElement(Q.a,null,o.a.createElement("form",{className:"formDiv",onSubmit:function(t){t.preventDefault();var c={title:a.value,author:r.value,url:l.value};e(function(e,t){return function(){var n=Object(C.a)(S.a.mark((function n(a){var r,c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,R.create(e);case 3:r=n.sent,a({type:"CREATE_BLOG",data:r}),c=r.user[0].username,a({type:"UPDATE_USER_BLOGS",blog:r,username:c}),A(a,"a new blog ".concat(r.title," by ").concat(r.author," added")),t.push("/blogs/".concat(r.id)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),n.t0.response.data.error?A(a,n.t0.response.data.error,15,"error"):A(a,"Server is not responding",15,"error");case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(c,n)),p(!1)}},o.a.createElement("div",null,o.a.createElement(P.a,{label:"title",inputProps:a,required:!0})),o.a.createElement("div",null,o.a.createElement(P.a,{label:"author",inputProps:r,required:!0})),o.a.createElement("div",null,o.a.createElement(P.a,{label:"url",inputProps:l,required:!0})),o.a.createElement(H.a,null,o.a.createElement(J.a,{id:"blogSubmitButton",type:"submit"},"submit"))))))},ue=n(230),se=n(232),me=function(e,t,n){return function(a){a({type:"ADD_MESSAGE",data:{message:e,severity:n||"success"}}),clearTimeout(r),r=setTimeout((function(){a({type:"CLEAR_MESSAGE"})}),1e3*(t||5))}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return t.data;case"CLEAR_MESSAGE":return null;default:return e}},de=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.notifications})),n=function(){e((function(e){e({type:"CLEAR_MESSAGE"})}))};return t?o.a.createElement(se.a,{open:!0,onClose:n},o.a.createElement(ue.a,{onClose:n,severity:t.severity},t&&o.a.createElement("div",{className:"error"},t.message))):null},fe=null,Ee={getAll:function(){return I.a.get("/api/users").then((function(e){return e.data}))},signIn:function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(e){var t={headers:{Authorization:fe}};return I.a.delete("".concat("/api/users","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){fe="bearer ".concat(e)},resetToken:function(){return fe=null}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.data;case"UPDATE_USER_BLOGS":var n=e.find((function(e){return e.username===t.username})),a=n.blogs.concat(t.blog);return e.map((function(e){return e.username===t.username?Object(j.a)({},n,{blogs:a}):e}));case"ADD_USER":return e.concat(t.user);case"REMOVE_USER":return e.filter((function(e){return e.id!==t.id}));default:return e}},ge={login:function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ge.login(e);case 3:a=t.sent,window.localStorage.setItem("loggedUser",JSON.stringify(a)),R.setToken(a.token),Ee.setToken(a.token),n({type:"LOGIN",data:a}),A(n,"welcome ".concat(a.name,"!")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response.data.error?A(n,t.t0.response.data.error,15,"error"):A(n,"Server is not responding",15,"error");case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},he=function(e,t){return function(){var n=Object(C.a)(S.a.mark((function n(a){var r,c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ee.signIn(e);case 3:return r=n.sent,n.next=6,ge.login({username:e.username,password:e.password});case 6:c=n.sent,window.localStorage.setItem("loggedUser",JSON.stringify(c)),R.setToken(c.token),Ee.setToken(c.token),a({type:"LOGIN",data:c}),a({type:"ADD_USER",user:r}),A(a,"account created ".concat(e.name,"!")),t.push("/users/".concat(r.id)),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),n.t0.response.data.error?A(a,n.t0.response.data.error,15,"error"):A(a,"Server is not responding",15,"error");case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e){return n.apply(this,arguments)}}()},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return t.data;case"LOGOUT":return null;default:return e}},ye=n(221),ke=function(){var e=Object(u.c)((function(e){return e.users}));return o.a.createElement(m.a,{alignItems:"stretch",justify:"center",container:!0,direction:"column",spacing:3},o.a.createElement(m.a,{alignItems:"center",container:!0,justify:"center",direction:"column"},o.a.createElement(m.a,{item:!0},o.a.createElement(p.a,{variant:"h2"},"Users"))),o.a.createElement(m.a,{item:!0},e.length>=1?o.a.createElement(d.a,{component:f.a},o.a.createElement(E.a,null,o.a.createElement(ye.a,null,o.a.createElement(g.a,null,o.a.createElement(v.a,null,"user"),o.a.createElement(v.a,{align:"right"},"blogs created"))),o.a.createElement(b.a,null,e.map((function(e){return o.a.createElement(g.a,{key:e.id},o.a.createElement(v.a,{component:"th",scope:"row"},o.a.createElement(s.b,{to:"/users/".concat(e.id)},o.a.createElement(p.a,null,e.username))),o.a.createElement(v.a,{align:"right",scope:"row"},o.a.createElement(p.a,null,e.blogs.length)))}))))):o.a.createElement(O,null)))},we=n(8),je=n(101),xe=n(222),Se=n(220),Ce=n(226),Te=n(227),Ie=n(225),Le=n(67),Ne=n.n(Le),Re=n(66),Ae=n.n(Re),_e=function(e){var t=e.handleClick,n=Object(u.b)();return o.a.createElement(xe.a,{onClick:function(){n((function(e){window.localStorage.removeItem("loggedUser"),R.resetToken(),Ee.resetToken(),e({type:"LOGOUT"}),A(e,"logged out",5,"info")})),t()}},"Logout")},Be=function(e){var t=e.handleClick,n=Object(u.b)(),a=M("text"),r=M("password"),l=Object(c.useState)(!1),i=Object(G.a)(l,2),s=i[0],m=i[1],p=function(){var e=Object(C.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{n(ve({username:a.value,password:r.value})),a.onSubmit(),r.onSubmit()}catch(c){console.log(c),n(me("wrong username or password",5))}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement(xe.a,{onClick:function(){m(!0),t()}},"Login"),o.a.createElement(Y.a,{open:s,onClose:function(){m(!1)},"aria-labelledby":"form-dialog-title"},o.a.createElement(Z.a,{id:"form-dialog-title"},"Login"),o.a.createElement(Q.a,null,o.a.createElement("form",{onSubmit:p},o.a.createElement("div",null,o.a.createElement(P.a,{label:"username",inputProps:a,required:!0})),o.a.createElement("div",null,o.a.createElement(P.a,{label:"password",inputProps:r,required:!0})),o.a.createElement(H.a,null,o.a.createElement(J.a,{variant:"contained",id:"login-button",type:"submit"},"login"))))))},Ge=function(e){var t=e.handleClick,n=Object(k.f)(),a=Object(u.b)(),r=M("text"),l=M("text"),i=M("password"),s=Object(c.useState)(!1),m=Object(G.a)(s,2),p=m[0],d=m[1],f=function(){var e=Object(C.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a(he({username:r.value,password:i.value,name:l.value},n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement(xe.a,{onClick:function(){d(!0),t()}},"Sign in"),o.a.createElement(Y.a,{open:p,onClose:function(){d(!1)},"aria-labelledby":"form-dialog-title"},o.a.createElement(Z.a,{id:"form-dialog-title"},"Sign in"),o.a.createElement(Q.a,null,o.a.createElement("form",{onSubmit:f},o.a.createElement("div",null,o.a.createElement(P.a,{label:"name",inputProps:l,required:!0})),o.a.createElement("div",null,o.a.createElement(P.a,{label:"username",inputProps:r,required:!0})),o.a.createElement("div",null,o.a.createElement(P.a,{label:"password",inputProps:i,required:!0})),o.a.createElement(H.a,null,o.a.createElement(J.a,{variant:"contained",id:"login-button",type:"submit"},"sign in"))))))},De=function(e){var t=e.handleClick,n=Object(k.f)(),a=Object(u.c)((function(e){return e.login})),r=Object(u.c)((function(e){return e.users.find((function(e){return e.username===a.username}))})),c=Object(u.b)();return o.a.createElement("div",null,o.a.createElement($,{buttonText:o.a.createElement(xe.a,{onClick:function(){return t()}},"Remove"),dialogTitle:"Remove accout",dialogText:"You are about to delete your account ".concat(a.name,". All your blogs and information will be removed. This action cannot be reverted."),confirmButtonName:"Remove Account",cancelButtonName:"Cancel",action:function(){c(function(e){return function(){var t=Object(C.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.remove(e.id);case 3:n({type:"REMOVE_USER",id:e.id}),e.blogs.forEach((function(e){n({type:"DELETE_BLOG",data:e.id})})),window.localStorage.removeItem("loggedUser"),R.resetToken(),Ee.resetToken(),n({type:"LOGOUT"}),A(n,"User ".concat(e.name," removed.")),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),A(n,t.t0.response.data.error,15,"error"),A(n,"Server is not responding",15,"error");case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(r,r.id)),n.push("/blogs")}}))},Me=function(e){var t=e.handleClick,n=Object(u.c)((function(e){return e.login})),a=Object(k.f)();return o.a.createElement(xe.a,{onClick:function(){t(),a.push("/users/".concat(n.id))}},n&&o.a.createElement(p.a,null,n.name))},Ue=n(3),Pe=n(231),qe=n(206),ze=n(152),Je=n(223),Fe=n(224),Ke=n(97),Ve=n.n(Ke),We=Object(D.a)({list:{width:250},fullList:{width:"auto"}});function Ye(e){var t=e.styleThing,n=We(),a=o.a.useState({left:!1}),r=Object(G.a)(a,2),c=r[0],l=r[1],i=function(e,t){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&l(Object(j.a)({},c,Object(B.a)({},e,t)))}};return o.a.createElement("div",null,o.a.createElement(o.a.Fragment,{key:"left"},o.a.createElement(Se.a,{onClick:i("left",!0),edge:"start",className:t,color:"inherit","aria-label":"open drawer"},o.a.createElement(Ve.a,null)),o.a.createElement(Pe.a,{anchor:"left",open:c.left,onClose:i("left",!1),onOpen:i("left",!0)},function(e){return o.a.createElement("div",{className:Object(Ue.a)(n.list,Object(B.a)({},n.fullList,"top"===e||"bottom"===e)),role:"presentation",onClick:i(e,!1),onKeyDown:i(e,!1)},o.a.createElement(qe.a,null,[{text:"blogs",to:"/blogs",icon:o.a.createElement(Ae.a,null)},{text:"users",to:"/users",icon:o.a.createElement(Ne.a,null)}].map((function(e){return o.a.createElement(ze.a,{button:!0,key:e.text,component:s.b,to:e.to},o.a.createElement(Je.a,null,e.icon),o.a.createElement(Fe.a,{primary:e.text}))}))),o.a.createElement(K.a,null))}("left"))))}var He=n(229),Qe=n(98),Xe=n.n(Qe),Ze=Object(D.a)((function(e){return{root:{flexGrow:1},search:Object(B.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(we.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(we.c)(e.palette.common.white,.25)},marginLeft:5,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(B.a)({textIndent:48,color:"white",padding:e.spacing(8,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function $e(){var e=Object(u.c)((function(e){return e.blogs})),t=Object(u.c)((function(e){return e.users})),n=e.concat(t),a=Object(k.f)(),r=Ze(),c=function(n){var r=n.target,c=e.find((function(e){return e.title===r.value})),o=t.find((function(e){return e.username===r.value}));c&&a.push("/blogs/".concat(c.id)),o&&a.push("/users/".concat(o.id))};return o.a.createElement(He.a,{freeSolo:!0,id:"autocomplete-search",disableClearable:!0,options:n,getOptionLabel:function(e){return e.title||e.username||e},classes:{input:r.inputInput,root:r.root},renderInput:function(e){return o.a.createElement("div",{className:r.search},o.a.createElement("div",{className:r.searchIcon},o.a.createElement(Xe.a,null)),o.a.createElement(P.a,Object.assign({},e,{InputProps:Object(j.a)({},e.InputProps,{type:"search"}),onSelect:c})))}})}var et=Object(D.a)((function(e){return{grow:{flexGrow:1,marginBottom:25,spacing:700},menuButton:{marginRight:e.spacing(2)},title:Object(B.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(B.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(we.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(we.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(B.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(B.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),toolbar:e.mixins.toolbar,sectionMobile:Object(B.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function tt(){var e=et(),t=Object(u.c)((function(e){return e.login})),n=o.a.useState(null),a=Object(G.a)(n,2),r=a[0],c=a[1],l=o.a.useState(null),i=Object(G.a)(l,2),m=i[0],d=i[1],f=Boolean(r),E=Boolean(m),b=function(e){c(e.currentTarget)},g=function(){d(null)},v=function(){c(null),g()},h="primary-search-account-menu",O=o.a.createElement(je.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},id:h,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:f,onClose:v},t?o.a.createElement("div",null,o.a.createElement(Me,{handleClick:v}),o.a.createElement(_e,{handleClick:v}),o.a.createElement(De,{handleClick:v})):o.a.createElement("div",null,o.a.createElement(Be,{handleClick:v}),o.a.createElement(Ge,{handleClick:v}))),y=o.a.createElement(je.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:E,onClose:g},o.a.createElement(xe.a,{onClick:b},o.a.createElement(Se.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},o.a.createElement(Ie.a,null)),o.a.createElement("p",null,"profile")));return o.a.createElement("div",{className:e.grow},o.a.createElement("div",{className:e.toolbar}),o.a.createElement(Ce.a,{position:"fixed"},o.a.createElement(Te.a,null,o.a.createElement("div",{className:e.sectionMobile},o.a.createElement(Ye,{styleThing:e.menuButton})),o.a.createElement(p.a,{className:e.title,variant:"h6",noWrap:!0},"Blogs"),o.a.createElement($e,null),o.a.createElement("div",{className:e.sectionDesktop},o.a.createElement(Se.a,{color:"inherit",component:s.b,to:"/blogs"},o.a.createElement(Ae.a,null)," ",o.a.createElement(p.a,null,"Blogs")),o.a.createElement(Se.a,{color:"inherit",component:s.b,to:"/users"},o.a.createElement(Ne.a,null)," ",o.a.createElement(p.a,null,"People"))),o.a.createElement("div",{className:e.grow}),o.a.createElement(Se.a,{edge:"end","aria-label":"account of current user","aria-controls":h,"aria-haspopup":"true",onClick:b,color:"inherit"},o.a.createElement(Ie.a,null)))),y,O)}var nt=function(){var e=Object(u.b)();return Object(c.useEffect)((function(){e(function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.getAll();case 3:n=e.sent,t({type:"INIT_BLOGS",data:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A(t,"couldn't load blogs from server",5,"warning");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.getAll();case 3:n=e.sent,t({type:"INIT_USERS",data:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A(t,"couldn't load users from server",5,"warning");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(C.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.getComments();case 3:n=e.sent,t({type:"INIT_COMMENTS",comments:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A(t,"couldn't load comments from server",5,"warning");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(c.useEffect)((function(){var t,n=window.localStorage.getItem("loggedUser");n&&e((t=n,function(e){var n=JSON.parse(t);R.setToken(n.token),Ee.setToken(n.token),e({type:"LOGIN",data:n})}))}),[e]),o.a.createElement(z.a,null,o.a.createElement(s.a,null,o.a.createElement(de,null),o.a.createElement(tt,null),o.a.createElement(ie,null),o.a.createElement(k.c,null,o.a.createElement(k.a,{path:"/blogs/:id"}," ",o.a.createElement(ee,null)," "),o.a.createElement(k.a,{path:"/blogs"}," ",o.a.createElement(y,null)," "),o.a.createElement(k.a,{path:"/users/:id"}," ",o.a.createElement(w,null)," "),o.a.createElement(k.a,{path:"/users"}," ",o.a.createElement(ke,null)," "),o.a.createElement(k.a,{path:"/"}," ",o.a.createElement(y,null)," "))))},at=n(99),rt=n(100),ct=n(41),ot=Object(ct.combineReducers)({notifications:pe,blogs:_,login:Oe,users:be,comments:U}),lt=Object(ct.createStore)(ot,Object(rt.composeWithDevTools)(Object(ct.applyMiddleware)(at.a)));i.a.render(o.a.createElement(u.a,{store:lt},o.a.createElement(nt,null)),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.e36b8f4f.chunk.js.map